{"version":3,"sources":["webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?0545","webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?6e95","webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?bebb","webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?147a","uni-app:///component/Find/Banner.vue","webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?3b1e","webpack:///C:/D/front/uniapp/m.cloudmusic/m.cloudmusic/component/Find/Banner.vue?dd6e"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;AACsC;;;AAG3F;AACyK;AACzK,gBAAgB,6KAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAioB,CAAgB,gnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyCrpB;AACA,gBADA;AAEA,MAFA,kBAEA;AACA;AACA;AACA,oBAFA;AAGA;AACA;AACA;AACA,uBAFA;AAGA;AACA,yBAJA;AAKA;AACA,kCANA;AAOA;AACA,uCARA;AASA;AACA,8BAVA;AAWA;AACA,yBAZA;AAaA;AACA,sBAdA;AAeA;AACA,8BAhBA;AAiBA;AACA,8BAlBA,EAJA;;;AAyBA,GA5BA;AA6BA;AACA;;;AAGA,oBAJA,8BAIA;AACA;AACA;AACA;AACA;AACA;AACA,qBALA,GADA;;AAQA,KAZA;;AAcA;;;AAGA,iBAjBA,2BAiBA;AACA,2DADA;AAEA;AACA,mFADA;AAEA,iCAFA;AAGA;AACA,+BADA,CACA;AADA,qBAHA;AAMA;AACA;AACA;AACA;AACA,qBAVA,GAFA,SAEA,GAFA;;AAcA,KA/BA;;AAiCA;;;AAGA,cApCA,wBAoCA;AACA;AACA,KAtCA;;AAwCA;;;AAGA,oBA3CA,8BA2CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBANA,EAMA,GANA;AAOA,iBAZA;AAaA,UAbA;AAcA,KA1DA;;AA4DA;;;AAGA,0BA/DA,kCA+DA,KA/DA,EA+DA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAxEA;;AA0EA;;;AAGA,yBA7EA,iCA6EA,KA7EA,EA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAzFA;;AA2FA;;;AAGA,wBA9FA,gCA8FA,KA9FA,EA8FA;AACA;AACA;AACA;AACA;AACA;AACA,KApGA,EA7BA;;;AAoIA,aApIA,yBAoIA;AACA,sCADA;AAEA,kCAFA;AAGA,GAvIA;;AAyIA,SAzIA,qBAyIA;AACA,yCADA;AAEA,GA3IA,E;;;;;;;;;;;;;ACzCA;AAAA;AAAA;AAAA;AAA4rC,CAAgB,wlCAAG,EAAC,C;;;;;;;;;;;ACAhtC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"component/Find/Banner.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./Banner.vue?vue&type=template&id=0d0efcdc&scoped=true&\"\nvar renderjs\nimport script from \"./Banner.vue?vue&type=script&lang=js&\"\nexport * from \"./Banner.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Banner.vue?vue&type=style&index=0&id=0d0efcdc&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0d0efcdc\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"component/Find/Banner.vue\"\nexport default component.exports","export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Banner.vue?vue&type=template&id=0d0efcdc&scoped=true&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Banner.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Banner.vue?vue&type=script&lang=js&\"","<template>\r\n<!--轮播图组件-->\r\n  <div class=\"banner_wrapper\">\r\n    <ul class=\"banner_inner_wrapper\"\r\n        :style=\"{left: `${bannerData.innerWrapperLeftValue}vw`, transition: bannerData.innerTransition}\"\r\n        @touchstart=\"handleBannerTouchStart\"\r\n        @touchmove=\"handleBannerTouchMove\"\r\n        @touchend=\"handleBannerTouchEnd\">\r\n      <li class=\"banner_item\">\r\n        <a href=\"#\" class=\"banner_link\">\r\n          <img v-bind:src=\"bannerList[0]? bannerList[bannerList.length - 1].pic : ''\" alt=\"\">\r\n          <div class=\"type_text\" :style=\"{backgroundColor: bannerList[0]? bannerList[bannerList.length - 1].titleColor : ''}\">\r\n            {{bannerList[0]? bannerList[bannerList.length - 1].typeTitle : ''}}\r\n          </div>\r\n        </a>\r\n      </li>\r\n      <li class=\"banner_item\" v-for=\"(item, index) in bannerList\">\r\n        <a href=\"#\" class=\"banner_link\">\r\n          <img v-bind:src=\"item.pic\" alt=\"\">\r\n          <div class=\"type_text\" :style=\"{backgroundColor: item.titleColor}\">\r\n            {{item.typeTitle}}\r\n          </div>\r\n        </a>\r\n      </li>\r\n      <li class=\"banner_item\">\r\n        <a href=\"#\" class=\"banner_link\">\r\n          <img v-bind:src=\"bannerList[0]? bannerList[0].pic : ''\" alt=\"\">\r\n          <div class=\"type_text\" :style=\"{backgroundColor: bannerList[0]? bannerList[0].titleColor : ''}\">\r\n            {{bannerList[0]? bannerList[0].typeTitle : ''}}\r\n          </div>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n    <div class=\"banner_dop_wrapper\">\r\n      <div class=\"banner_dop\" v-for=\"(item, index) in bannerList\"\r\n           :class=\"{banner_dop_active: index === bannerData.currentIndex - 1 }\"></div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: \"Banner\",\r\n  data() {\r\n    return {\r\n      //存储轮播图的数据\r\n      bannerList: [],\r\n      //轮播图播放的数据\r\n      bannerData: {\r\n        // 当前显示的轮播图的索引\r\n        currentIndex: 1,\r\n        // 轮播图定时器\r\n        bannerTimer: null,\r\n        // ul 标签的 left 值(由于不能操作dom，只能写在这里)\r\n        innerWrapperLeftValue: -95,\r\n        // touchStart 时候 的 innerWrapperLeftValue 值\r\n        touchedInnerWrapperLeftValue: 0,\r\n        //内部ul容器的transition值\r\n        innerTransition : `.5s`,\r\n        //手指是否处于触摸中\r\n        isTouching: false,\r\n        //视口宽度\r\n        screenWidth: 0,\r\n        //轮博图触摸开始时的位置X\r\n        touchStartPositionX: 0,\r\n        // 用于轮播图手指松开时，滑到下一页还是上一页\r\n        slideNextOrLastPage: 0\r\n      }\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * 获取视口的宽度\r\n     * */\r\n    async getViewportWidth() {\r\n      await uni.getSystemInfo({\r\n        success: (res) => {\r\n          this.bannerData.screenWidth = res.screenWidth;\r\n          //输出获取到的视口宽度\r\n          // console.log(res.screenWidth);\r\n        }\r\n      });\r\n    },\r\n\r\n    /**\r\n     * 获取轮播图数据\r\n     * */\r\n    async getBannerList() {\r\n      console.log(this.$store.state.localhost);\r\n      let res = await uni.request({\r\n        url: `${this.$store.state.localhost}/banner?type=1`,\r\n        method: 'get',\r\n        params: {\r\n          type: `1`, //1 表示安卓设备\r\n        },\r\n        success: (res) => {\r\n          this.bannerList = res.data.banners\r\n          //输出获取到的轮播图数据\r\n          // console.log(this.bannerList)\r\n        }\r\n      })\r\n    },\r\n\r\n    /**\r\n     * 轮播图自动播放\r\n     * */\r\n    bannerPlay() {\r\n      this.startBannerTimer()\r\n    },\r\n\r\n    /**\r\n     * 开启轮播图自动播放定时器的函数\r\n     * */\r\n    startBannerTimer() {\r\n      this.bannerData.bannerTimer = setInterval(async () => {\r\n        this.bannerData.currentIndex += 1;\r\n        this.bannerData.innerWrapperLeftValue = -95*this.bannerData.currentIndex\r\n        if(this.bannerData.currentIndex === this.bannerList.length + 1) {\r\n          //延时过动画跳过的时间\r\n          setTimeout( () => {\r\n            this.bannerData.innerTransition = `none`;\r\n            this.bannerData.currentIndex = 0;\r\n            this.bannerData.innerWrapperLeftValue = -95*this.bannerData.currentIndex\r\n            //TODO 不知道这里为什么加上setTimeout bug就解决了\r\n            setTimeout(() => { this.bannerData.innerTransition = `.5s`}, 100)\r\n          }, 500)\r\n        }\r\n      }, 3000)\r\n    },\r\n\r\n    /**\r\n     * 处理手指开始触摸事件\r\n     * */\r\n    handleBannerTouchStart(event) {\r\n      console.log(`touch start`);\r\n      // console.log(event.touches[0].pageX);\r\n      this.bannerData.touchStartPositionX = event.touches[0].pageX\r\n      // 触摸开始时，清除自动播放定时器\r\n      clearInterval(this.bannerData.bannerTimer)\r\n      this.bannerData.touchedInnerWrapperLeftValue = this.bannerData.innerWrapperLeftValue\r\n      // 关闭动画，防止出现拖不动的情况\r\n      this.bannerData.innerTransition = `none`\r\n    },\r\n\r\n    /**\r\n     * 处理轮博图touchmove事件\r\n     * */\r\n    handleBannerTouchMove(event) {\r\n      console.log(`touch move`);\r\n      console.log(event);\r\n      // this.innerWrapperLeftValue\r\n      //改变的像素值\r\n      let changedValuePx = event.touches[0].pageX - this.bannerData.touchStartPositionX\r\n      // 将改变的值换算为vw\r\n      let changedValueVw = changedValuePx / this.bannerData.screenWidth * 100\r\n      // 用于松开手指时，判断是上一页还是下一页\r\n      if(changedValuePx > 0) this.bannerData.slideNextOrLastPage = 0\r\n      else this.bannerData.slideNextOrLastPage = 1\r\n      this.bannerData.innerWrapperLeftValue =  this.bannerData.touchedInnerWrapperLeftValue + changedValueVw\r\n    },\r\n\r\n    /**\r\n     * 处理轮播图的touchend事件\r\n     * */\r\n    handleBannerTouchEnd(event) {\r\n      if(this.bannerData.slideNextOrLastPage) this.bannerData.currentIndex += 1\r\n      else this.bannerData.currentIndex -= 1\r\n      this.bannerData.innerTransition = `0.5s`\r\n      this.bannerData.innerWrapperLeftValue = -95*this.bannerData.currentIndex\r\n      this.startBannerTimer()\r\n    },\r\n  },\r\n\r\n  async beforeMount() {\r\n    await this.getBannerList()\r\n    this.bannerPlay()\r\n  },\r\n\r\n  async mounted() {\r\n    await this.getViewportWidth()\r\n  },\r\n}\r\n</script>\r\n\r\n<style scoped lang=\"less\">\r\n  .banner_wrapper {\r\n    width: 100vw;\r\n    height: 35vw;\r\n    overflow: hidden;\r\n    margin-top: 3vw;\r\n    position: relative;\r\n\r\n    .banner_inner_wrapper {\r\n      list-style: none;\r\n      display: flex;\r\n      flex-wrap: nowrap;\r\n      flex-direction: row;\r\n      padding: 0 2.5vw;\r\n      position: relative;\r\n      //left: -90vw;\r\n      //transition: .5s;\r\n\r\n      .banner_item {\r\n        width: 90vw;\r\n        margin-left:2.5vw;\r\n        margin-right:2.5vw;\r\n        position: relative;\r\n\r\n        a {\r\n          display: block;\r\n        }\r\n\r\n        img {\r\n          width: 90vw;\r\n          height: 35vw;\r\n          border-radius: 3vw;\r\n        }\r\n\r\n        .type_text {\r\n          position: absolute;\r\n          right:0;\r\n          bottom: 0;;\r\n          text-decoration: none;\r\n          width: 14vw;\r\n          height: 5vw;\r\n          line-height: 5vw;\r\n          font-size: 3vw;\r\n          text-align: center;\r\n          // border: 2px solid #000;\r\n          border-radius: 3vw 0 3vw 0;\r\n          color: #fff;\r\n        }\r\n      }\r\n    }\r\n\r\n    .banner_dop_wrapper {\r\n      width: 100vw;\r\n      height:3vw;\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: center;\r\n      align-items: center;\r\n      position: absolute;\r\n      left: 0;\r\n      bottom: 2vw;\r\n\r\n      .banner_dop {\r\n        width: 3vw;\r\n        height: 1vw;\r\n        background: rgba(255,255,255,.5);\r\n        margin-left: 1vw;\r\n        margin-right: 0.1vw;\r\n        border-radius: 1vw\r\n      }\r\n\r\n      .banner_dop_active {\r\n        background: rgba(255,255,255,1);\r\n      }\r\n    }\r\n  }\r\n</style>\r\n","import mod from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Banner.vue?vue&type=style&index=0&id=0d0efcdc&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-2!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-3!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-4!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--10-oneOf-1-5!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./Banner.vue?vue&type=style&index=0&id=0d0efcdc&scoped=true&lang=less&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1648903441776\n      var cssReload = require(\"C:/D/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}